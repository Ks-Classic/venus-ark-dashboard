# 採用ダッシュボード データ表示問題 - 体系的デバッグ

## 🎯 **問題の明確化**
- **現象**: APIからデータは取得できているが、UIに反映されない
- **具体的症状**: 応募数4、不採用数4のデータがあるのに、ダッシュボードで表示されない
- **最終更新**: 2025-06-27

---

## 📊 **現在のデータ状況確認済み**
✅ **APIレスポンス確認済み**:
- 第22週 AIライター: `totalApplications: 4`, `rejected: 4`, `applicationRejections: 4`
- 第23週 AIライター: `totalApplications: 4`, `rejected: 2`, `applicationRejections: 2`
- 動画クリエイター: 全て0（データなし）

---

## 🔍 **仮説と検証計画**

### **仮説1: フロントエンドのデータ集約ロジックに問題**
**可能性**: 高 🔴
**理由**: APIは4件のレポート（各職種）を返すが、UIは1つの集約値を期待している可能性

#### 検証タスク
- [ ] `useWeeklyReports`フックの集約ロジックを確認
- [ ] フロントエンドでの職種フィルタリング処理を確認
- [ ] 実際にUIコンポーネントに渡されるデータを確認

---

### **仮説2: 職種フィルター選択時のデータマッピング問題**
**可能性**: 高 🔴
**理由**: 「動画クリエイター」選択時にデータが表示されない

#### 検証タスク
- [ ] 職種選択時のAPIリクエストパラメータを確認
- [ ] 職種フィルターのマッピング（日本語↔英語）を確認
- [ ] 特定職種選択時のレスポンスデータを確認

---

### **仮説3: UIコンポーネントのデータバインディング問題**
**可能性**: 中 🟡
**理由**: データは取得できているが表示されない

#### 検証タスク
- [ ] `recruitment-dashboard.tsx`のデータ受け取り部分を確認
- [ ] プロップスの型定義と実際のデータ構造の整合性確認
- [ ] レンダリング条件（loading, error状態）を確認

---

### **仮説4: 日付・週番号計算のズレ**
**可能性**: 中 🟡
**理由**: 選択した週と実際のデータの週がズレている可能性

#### 検証タスク
- [ ] フロントエンドの週番号計算ロジックを確認
- [ ] APIの週番号計算ロジックとの整合性確認
- [ ] 実際の選択週とAPIリクエスト週の一致確認

---

### **仮説5: キャッシュ・状態管理の問題**
**可能性**: 低 🟢
**理由**: ターミナルログでは正しいデータが取得できている

#### 検証タスク
- [ ] ブラウザキャッシュのクリア
- [ ] React状態の初期化確認
- [ ] SWRキャッシュの確認

---

## 🚀 **実行計画（優先順位順）**

### **Phase 1: フロントエンドデータフロー確認** 🔴
- [ ] **1-1**: `useWeeklyReports`フックの実装詳細確認
- [ ] **1-2**: フロントエンドのconsole.logでデータ受け取り確認
- [ ] **1-3**: UIコンポーネントに渡されるpropsの内容確認

### **Phase 2: 職種フィルター検証** 🔴  
- [ ] **2-1**: 「動画クリエイター」選択時のAPIリクエスト確認
- [ ] **2-2**: 職種名のマッピング確認（UI表示名 ↔ API内部名）
- [ ] **2-3**: 「全職種」選択時のデータ集約処理確認

### **Phase 3: UIコンポーネント検証** 🟡
- [ ] **3-1**: `recruitment-dashboard.tsx`のデータ表示ロジック確認
- [ ] **3-2**: 条件分岐（データなし時の表示）確認
- [ ] **3-3**: 型定義とデータ構造の整合性確認

### **Phase 4: 週番号計算検証** 🟡
- [ ] **4-1**: フロントエンド週番号計算の確認
- [ ] **4-2**: 選択週とAPIリクエスト週の一致確認
- [ ] **4-3**: 週の境界値テスト

---

## 📝 **検証結果記録**

### **検証1-1: useWeeklyReportsフック確認**
**実行日時**: 2025-06-27 現在
**結果**: ✅ 実装確認完了
**発見**: 
1. **集約ロジックは正常**: 職種フィルターなしの場合、全職種のデータを合計している
2. **職種フィルター処理は正常**: 特定職種選択時は該当データのみ抽出
3. **データ変換は正常**: APIレスポンスを適切にWeeklyReport形式に変換
4. **⚠️ 潜在的問題発見**: 過去4週分を取得する処理で、現在選択週のデータも含まれる

**次のアクション**: Phase 1-2でフロントエンドのconsole.logを追加して実際のデータ受け取りを確認

### **検証1-2: フロントエンドデータ受け取り確認**
**実行日時**: 
**結果**: 
**発見**: 
**次のアクション**: 

### **検証1-3: UIコンポーネントprops確認**
**実行日時**: 
**結果**: 
**発見**: 
**次のアクション**: 

---

## 🎯 **解決目標**
- [ ] 第22週 AIライター: 応募数4、不採用数4が正しく表示される
- [ ] 第23週 AIライター: 応募数4、不採用数2が正しく表示される  
- [ ] 動画クリエイター: データなしの場合0が表示される
- [ ] 職種切り替えが正常に動作する
- [ ] 週選択が正常に動作する

---

## 📋 **進捗トラッキング**
- **開始時刻**: 
- **Phase 1 完了時刻**: 
- **Phase 2 完了時刻**: 
- **Phase 3 完了時刻**: 
- **Phase 4 完了時刻**: 
- **問題解決時刻**: 

---

## 🔧 **デバッグツール・手法**
- ✅ ターミナルログ（APIレスポンス確認済み）
- [ ] ブラウザDevTools（Network, Console）
- [ ] React DevTools
- [ ] フロントエンドconsole.log追加
- [ ] ステップデバッガー 