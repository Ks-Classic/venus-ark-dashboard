# SOW: データフロー根本原因調査および修正 (Phase 4)

## 1. 背景と目的
複数回の修正にも関わらず、「選択週の同期」機能がUIに反映されない問題が継続している。その根本原因を、データフローの全段階にわたって多角的に調査・特定し、恒久的な対策を講じることを目的とする。

## 2. 作業範囲 (Scope of Work)

### 2.1. 仮説検証 (優先度：最高〜高) - データソースと処理層の不一致調査
- **2.1.1.** Google Sheetsのヘッダー行（1行目）のみを取得し、コンソールに出力する一時的なデバッグスクリプト (`scripts/temp_get_sheet_headers.ts`) を作成し、実行する。
- **2.1.2.** 取得した実際のヘッダー名と、APIコード (`sync-week/route.ts`) 内で日��識別のために参照している列名 (`'応募日'`) を比較し、完全一致しているか（スペース、タイポ、全角/半角の違いなどを含めて）を確認する。
- **2.1.3.** 不一致が確認された場合、APIコード側の文字列を、Google Sheetsの実際の列名に合わせる形で修正する。

### 2.2. 仮説検証 (優先度：中) - エラーハンドリングとデータフローの改善
- **2.2.1.** API (`sync-week/route.ts`) のロジックを修正し、処理対象データが0件だった場合に、その旨を明確に伝えるメッセージ（例: `message: '対象期間のデータは見つかりませんでした。'`) をレスポンスに含めるように変更する。
- **2.2.2.** フロントエンド (`recruitment-dashboard.tsx`) で、そのメッセージを受け取った際に、ユーザーに「対象データなし」とトースト通知で知らせる処理を追加する。

## 3. 成果物
1. 根本原因を特定した調査結果の報告。
2. 問題を修正し、正常に動作する「選択週の同期」機能。
3. （作成した場合）一時的なデバッグスクリプト��

## 4. 開発上の絶対的ルール
- 本件の開発は、`docs/GEMINI_RULES.md` に記載されたルールに厳密に従うものとする。
